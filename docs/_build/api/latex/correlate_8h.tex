\hypertarget{correlate_8h}{}\doxysection{include/correlate.h File Reference}
\label{correlate_8h}\index{include/correlate.h@{include/correlate.h}}


File containing example of doxygen usage for quick reference.  


{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$cstdio$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$list$>$}\newline
{\ttfamily \#include $<$iterator$>$}\newline
{\ttfamily \#include $<$functional$>$}\newline
{\ttfamily \#include $<$numeric$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$climits$>$}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_correlator}{Correlator}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{correlate_8h_aa27083c37224da35557ece07b1166b8e}{normalize\+\_\+correlation}} (double np1, uint64\+\_\+t dt1, double np2, uint64\+\_\+t dt2, std\+::vector$<$ unsigned long long $>$ \&x\+\_\+axis, std\+::vector$<$ double $>$ \&corr, size\+\_\+t n\+\_\+bins)
\item 
void \mbox{\hyperlink{correlate_8h_a05e3bd27257b65b0d7ddb939bfe893f8}{make\+\_\+fine\+\_\+times}} (unsigned long long $\ast$t, unsigned int n\+\_\+times, unsigned int $\ast$tac, unsigned int n\+\_\+tac)
\item 
void \mbox{\hyperlink{correlate_8h_aee529d65974dcd19bc1bd9e88e53f528}{correlate}} (size\+\_\+t start\+\_\+1, size\+\_\+t end\+\_\+1, size\+\_\+t start\+\_\+2, size\+\_\+t end\+\_\+2, size\+\_\+t i\+\_\+casc, size\+\_\+t n\+\_\+bins, std\+::vector$<$ unsigned long long $>$ \&taus, std\+::vector$<$ double $>$ \&corr, const unsigned long long $\ast$t1, const double $\ast$w1, size\+\_\+t nt1, const unsigned long long $\ast$t2, const double $\ast$w2, size\+\_\+t nt2)
\item 
void \mbox{\hyperlink{correlate_8h_a6dddd7ef2ed085b6788c321adc5457ca}{coarsen}} (unsigned long long $\ast$t, double $\ast$w, size\+\_\+t nt)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
File containing example of doxygen usage for quick reference. 

\begin{DoxyAuthor}{Author}
Thomas-\/\+Otavio Peulen 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
20 Feb 2019 Here typically goes a more extensive explanation of what the header defines. Doxygens tags are words preceeded by either a backslash \textbackslash{} or by an at symbol @. 
\end{DoxyDate}
\begin{DoxySeeAlso}{See also}
\href{http://www.stack.nl/~dimitri/doxygen/docblocks.html}{\texttt{ http\+://www.\+stack.\+nl/$\sim$dimitri/doxygen/docblocks.\+html}} 

\href{http://www.stack.nl/~dimitri/doxygen/commands.html}{\texttt{ http\+://www.\+stack.\+nl/$\sim$dimitri/doxygen/commands.\+html}} 
\end{DoxySeeAlso}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{correlate_8h_a6dddd7ef2ed085b6788c321adc5457ca}\label{correlate_8h_a6dddd7ef2ed085b6788c321adc5457ca}} 
\index{correlate.h@{correlate.h}!coarsen@{coarsen}}
\index{coarsen@{coarsen}!correlate.h@{correlate.h}}
\doxysubsubsection{\texorpdfstring{coarsen()}{coarsen()}}
{\footnotesize\ttfamily void coarsen (\begin{DoxyParamCaption}\item[{unsigned long long $\ast$}]{t,  }\item[{double $\ast$}]{w,  }\item[{size\+\_\+t}]{nt }\end{DoxyParamCaption})}

Coarsens the time events

This function coarsens a set of time events by dividing the times by two. In case two consecutive time events in the array have the same time, the weights of the two events are added to the following weight element and the value of the previous weight is set to zero.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em t} & A vector of the time events of the first channel \\
\hline
\mbox{\texttt{ in,out}}  & {\em w} & A vector of weights for the time events of the first channel \\
\hline
\mbox{\texttt{ in}}  & {\em nt} & The number of time events in the first channel \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{correlate_8h_aee529d65974dcd19bc1bd9e88e53f528}\label{correlate_8h_aee529d65974dcd19bc1bd9e88e53f528}} 
\index{correlate.h@{correlate.h}!correlate@{correlate}}
\index{correlate@{correlate}!correlate.h@{correlate.h}}
\doxysubsubsection{\texorpdfstring{correlate()}{correlate()}}
{\footnotesize\ttfamily void correlate (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{start\+\_\+1,  }\item[{size\+\_\+t}]{end\+\_\+1,  }\item[{size\+\_\+t}]{start\+\_\+2,  }\item[{size\+\_\+t}]{end\+\_\+2,  }\item[{size\+\_\+t}]{i\+\_\+casc,  }\item[{size\+\_\+t}]{n\+\_\+bins,  }\item[{std\+::vector$<$ unsigned long long $>$ \&}]{taus,  }\item[{std\+::vector$<$ double $>$ \&}]{corr,  }\item[{const unsigned long long $\ast$}]{t1,  }\item[{const double $\ast$}]{w1,  }\item[{size\+\_\+t}]{nt1,  }\item[{const unsigned long long $\ast$}]{t2,  }\item[{const double $\ast$}]{w2,  }\item[{size\+\_\+t}]{nt2 }\end{DoxyParamCaption})}

Calculates the cross-\/correlation between two arrays containing time events.

Cross-\/correlates two weighted arrays of events using an approach that utilizes a linear spacing of the bins within a cascade and a logarithmic spacing of the cascades. The function works inplace on the input times, i.\+e, during the correlation the values of the input times and weights are changed to coarsen the times and weights for every correlation cascade.

The start position parameters
\begin{DoxyParams}{Parameters}
{\em start\+\_\+1} & and\\
\hline
{\em start\+\_\+2} & and the end position parameters\\
\hline
{\em end\+\_\+1} & and\\
\hline
{\em end\+\_\+1} & define which part of the time array of the first and second correlation channel are used for the correlation analysis.\\
\hline
\end{DoxyParams}
The correlation algorithm combines approaches of the following papers\+:


\begin{DoxyItemize}
\item Fast calculation of fluorescence correlation data with asynchronous time-\/correlated single-\/photon counting, Michael Wahl, Ingo Gregor, Matthias Patting, Joerg Enderlein, Optics Express Vol. 11, No. 26, p. 3383
\item Fast, flexible algorithm for calculating photon correlations, Ted A. Laurence, Samantha Fore, Thomas Huser, Optics Express Vol. 31 No. 6, p.\+829
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em start\+\_\+1} & The start position on the time event array of the first channel. \\
\hline
\mbox{\texttt{ in}}  & {\em end\+\_\+1} & The end position on the time event array of the first channel. \\
\hline
\mbox{\texttt{ in}}  & {\em start\+\_\+2} & The start position on the time event array of the second channel. \\
\hline
\mbox{\texttt{ in}}  & {\em end\+\_\+2} & The end position on the time event array of the second channel. \\
\hline
\mbox{\texttt{ in}}  & {\em i\+\_\+casc} & The number of the current cascade \\
\hline
\mbox{\texttt{ in}}  & {\em n\+\_\+bins} & The number of bins per cascase \\
\hline
\mbox{\texttt{ in}}  & {\em taus} & A vector containing the correlation times of all cascades \\
\hline
\mbox{\texttt{ out}}  & {\em corr} & A vector to that the correlation is written by the function \\
\hline
\mbox{\texttt{ in,out}}  & {\em t1} & A vector of the time events of the first channel \\
\hline
\mbox{\texttt{ in,out}}  & {\em w1} & A vector of weights for the time events of the first channel \\
\hline
\mbox{\texttt{ in}}  & {\em nt1} & The number of time events in the first channel \\
\hline
\mbox{\texttt{ in,out}}  & {\em t2} & A vector of the time events of the second channel \\
\hline
\mbox{\texttt{ in,out}}  & {\em w2} & A vector of weights for the time events of the second channel \\
\hline
\mbox{\texttt{ in}}  & {\em nt2} & The number of time events in the second channel \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{correlate_8h_a05e3bd27257b65b0d7ddb939bfe893f8}\label{correlate_8h_a05e3bd27257b65b0d7ddb939bfe893f8}} 
\index{correlate.h@{correlate.h}!make\_fine\_times@{make\_fine\_times}}
\index{make\_fine\_times@{make\_fine\_times}!correlate.h@{correlate.h}}
\doxysubsubsection{\texorpdfstring{make\_fine\_times()}{make\_fine\_times()}}
{\footnotesize\ttfamily void make\+\_\+fine\+\_\+times (\begin{DoxyParamCaption}\item[{unsigned long long $\ast$}]{t,  }\item[{unsigned int}]{n\+\_\+times,  }\item[{unsigned int $\ast$}]{tac,  }\item[{unsigned int}]{n\+\_\+tac }\end{DoxyParamCaption})}

Changes the time events by adding the micro time to the macro time

Changes the time events by adding the micro time to the macro time. The micro times should match the macro time, i.\+e., the length of the micro time array should be the at least the same length as the macro time array.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em t} & An array containing the time events (macro times) \\
\hline
\mbox{\texttt{ in}}  & {\em n\+\_\+times} & The number of macro times. \\
\hline
\mbox{\texttt{ in}}  & {\em tac} & An array containing the micro times of the corresponding macro times \\
\hline
\mbox{\texttt{ in}}  & {\em tac} & The number of micro time channels (T\+AC channels) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{correlate_8h_aa27083c37224da35557ece07b1166b8e}\label{correlate_8h_aa27083c37224da35557ece07b1166b8e}} 
\index{correlate.h@{correlate.h}!normalize\_correlation@{normalize\_correlation}}
\index{normalize\_correlation@{normalize\_correlation}!correlate.h@{correlate.h}}
\doxysubsubsection{\texorpdfstring{normalize\_correlation()}{normalize\_correlation()}}
{\footnotesize\ttfamily void normalize\+\_\+correlation (\begin{DoxyParamCaption}\item[{double}]{np1,  }\item[{uint64\+\_\+t}]{dt1,  }\item[{double}]{np2,  }\item[{uint64\+\_\+t}]{dt2,  }\item[{std\+::vector$<$ unsigned long long $>$ \&}]{x\+\_\+axis,  }\item[{std\+::vector$<$ double $>$ \&}]{corr,  }\item[{size\+\_\+t}]{n\+\_\+bins }\end{DoxyParamCaption})}

Normalizes a correlation curve.

This normalization applied to correlation curves that were calculated using a linear/logrithmic binning as described in


\begin{DoxyItemize}
\item Fast calculation of fluorescence correlation data with asynchronous time-\/correlated single-\/photon counting, Michael Wahl, Ingo Gregor, Matthias Patting, Joerg Enderlein, Optics Express Vol. 11, No. 26, p. 3383
\end{DoxyItemize}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em np1} & The sum of the weights in the first correlation channel \\
\hline
\mbox{\texttt{ in}}  & {\em dt1} & The time difference between the first event and the last event in the first correlation channel \\
\hline
\mbox{\texttt{ in}}  & {\em np2} & The sum of the weights in the second correlation channel \\
\hline
\mbox{\texttt{ in}}  & {\em dt2} & The time difference between the first event and the last event in the second correlation channel \\
\hline
\mbox{\texttt{ in,out}}  & {\em x\+\_\+axis} & The x-\/axis of the correlation \\
\hline
\mbox{\texttt{ in,out}}  & {\em corr} & The array that contains the original correlation that is modified in place. \\
\hline
\mbox{\texttt{ in}}  & {\em n\+\_\+bins} & The number of bins per cascade of the correlation \\
\hline
\end{DoxyParams}
